# Template file for 'termusic'
pkgname=termusic
version=0.9.0
revision=1
archs="i686 x86_64"
#build_wrksrc=
build_style=cargo
configure_args="--no-default-features --features cover,mpv -all"
#make_build_args=""
make_install_args="--path tui"
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="git pkg-config protobuf"
makedepends="dbus-devel openssl-devel alsa-lib-devel mpv-devel"
depends="protobuf mpv"
short_desc="Terminal Music and Podcast Player written in Rust"
maintainer="dvar <dvar@tuta.io>"
license="GPL-3.0, MIT"
homepage="https://github.com/tramhao/termusic"
#changelog=""
distfiles="https://github.com/tramhao/termusic/archive/refs/tags/v${version}.tar.gz"
checksum=496a93d1091de7fa91ed9cbd8d2dfe9876b4aab3ec8149c64f2098c4d1536f89

do_install() {
	${make_cmd:=cargo auditable}
	
	${make_cmd} install --target ${RUST_TARGET} --root="${DESTDIR}/usr" \
		--offline --locked ${make_install_args}

	rm -f "${DESTDIR}"/usr/.crates.toml
	rm -f "${DESTDIR}"/usr/.crates2.json
}
